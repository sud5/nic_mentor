define(["jquery","jqueryui","core/ajax","core/str","core/form-autocomplete","core/notification","core/templates","core/url"],function(t,e,a,n,o,i,c,r){var s={setup:function(){t(document).on("change","#id_state",s.state_dropdown),t(document).on("change","#id_city",s.city_dropdown),t(document).on("click",".approve_button, .deny_button",s.approve_request),t(document).on("click",".page-link",s.pagination)},state_dropdown:function(){var e=t("#id_state").val();t.ajax({type:"POST",data:{state:e,action:"city"},url:"classes/ajax.php",success:function(e){t("#id_city").html(e);var a=t("#id_city").val();t("#cityid").val(a)}})},city_dropdown:function(){var e=t("#id_city").val();t("#cityid").val(e)},approve_request:function(){var e=t(this).attr("id"),a=t(this).attr("status"),n={pix:M.util.image_url("i/loading_small","core"),component:"moodle"},o=t("<img />").attr("src",M.util.image_url(n.pix,n.component)).addClass("spinner");t(" .data-procession"+e).html('<div class="text-center">'+o.get(0).outerHTML+"</div>"),t.ajax({type:"POST",data:{mentor:e,action:"approve",status:a},url:"classes/ajax.php",success:function(a){t(" .data-procession"+e).html(a)}})},pagination:function(e){e.preventDefault();var a=function(t,e){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[null,""])[1].replace(/\+/g,"%20"))||null}("page",t(this).attr("href"));if(isNaN(a))e.preventDefault();else{var n={pix:M.util.image_url("loading","local_mentor"),component:"moodle"},o=t("<img />").attr("src",M.util.image_url(n.pix,n.component)).addClass("spinner");t(".mentor-request-list").html('<div class="text-center">'+o.get(0).outerHTML+"</div>"),t.ajax({type:"POST",data:{page:a,action:"pagination"},url:"classes/ajax.php",success:function(e){t(".mentor-request-list").html(e)}})}}};return{setup:s.setup}});