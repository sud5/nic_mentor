define(["jquery","jqueryui","core/ajax","core/str","core/form-autocomplete","core/notification","core/templates","core/url"],function(t,e,o,n,l,r,a,i){var m={setup:function(){var e,o,n;t(document).on("click",".page-link",m.pagination),t(document).on("keyup","#mentornames",(e=m.text_filter,o=1e3,n=0,function(){var t=this,l=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(t,l)},o||0)})),t(document).on("click",".showmentor",m.show_mentors)},pagination:function(e){e.preventDefault();var n=function(t,e){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[null,""])[1].replace(/\+/g,"%20"))||null}("page",t(this).attr("href"));if(isNaN(n))e.preventDefault();else{var l=t("#mentornames").val(),a={pix:M.util.image_url("loading","local_mentor"),component:"moodle"},i=t("<img />").attr("src",M.util.image_url(a.pix,a.component)).addClass("spinner");t(".mentorschool-list-report").html('<div class="text-center">'+i.get(0).outerHTML+"</div>"),o.call([{methodname:"local_mentor_school_list",args:{page:n,name:l}}])[0].then(function(e){t(".mentorschool-list-report").html(e.html)}).fail(r.exception)}},text_filter:function(){var e=t("#mentornames").val(),n={pix:M.util.image_url("loading","local_mentor"),component:"moodle"},l=t("<img />").attr("src",M.util.image_url(n.pix,n.component)).addClass("spinner");t(".mentorschool-list-report").html('<div class="text-center">'+l.get(0).outerHTML+"</div>"),o.call([{methodname:"local_mentor_school_list",args:{page:0,name:e}}])[0].then(function(e){t(".mentorschool-list-report").html(e.html)}).fail(r.exception)},show_mentors:function(){var e=t(this).attr("title"),o=t(this).attr("mentorlist");t("#basicModal").modal({show:!0}),t("#myModalLabel").html("<h4>"+e+"</h4>");var n=t(this).attr("schoollink");t("form").attr("action",n);var l=t(this).attr("mentorid");t("#reportid").val(l),t(".download-link").attr("style","none"),t(".modal-body-data").html(o)}};return{setup:m.setup}});